<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OASIS STAR – Asset Toolbar</title>
  <style>
    :root {
      --bg: #1a1b26;
      --surface: #24283b;
      --accent: #7aa2f7;
      --star: #e0af68;
      --text: #c0caf5;
      --muted: #565f89;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 8px;
      min-width: 320px;
    }
    header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 0;
      border-bottom: 1px solid var(--muted);
      margin-bottom: 8px;
    }
    .star-icon { font-size: 1.4rem; color: var(--star); }
    h1 { font-size: 1rem; font-weight: 600; margin: 0; color: var(--accent); }
    nav {
      display: flex;
      gap: 4px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }
    nav button {
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--muted);
      padding: 6px 10px;
      cursor: pointer;
      font-size: 0.85rem;
      border-radius: 4px;
    }
    nav button:hover { border-color: var(--accent); color: var(--accent); }
    nav button.active { background: var(--accent); color: var(--bg); border-color: var(--accent); }
    .game-tabs { display: flex; gap: 4px; margin-bottom: 8px; }
    .game-tabs button {
      flex: 1;
      padding: 8px;
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--muted);
      cursor: pointer;
      font-weight: 600;
      border-radius: 4px;
    }
    .game-tabs button.active { background: var(--star); color: var(--bg); border-color: var(--star); }
    .category { margin-bottom: 10px; }
    .category h3 { font-size: 0.8rem; color: var(--muted); margin: 0 0 6px 0; text-transform: uppercase; }
    .asset-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 6px;
    }
    .asset-btn {
      padding: 8px 10px;
      background: var(--surface);
      border: 1px solid var(--muted);
      color: var(--text);
      cursor: pointer;
      font-size: 0.8rem;
      text-align: left;
      border-radius: 4px;
    }
    .asset-btn:hover { border-color: var(--accent); }
    .asset-btn.selected { border-color: var(--star); background: rgba(224,175,104,0.15); }
    .help {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 12px;
      padding: 8px;
      background: var(--surface);
      border-radius: 4px;
    }
    .section { display: none; }
    .section.visible { display: block; }
  </style>
</head>
<body>
  <header>
    <span class="star-icon" aria-hidden="true">★</span>
    <h1>OASIS STAR API</h1>
  </header>
  <nav>
    <button data-section="place" class="active">Place asset</button>
    <button data-section="convert">Convert maps</button>
    <button data-section="about">About</button>
  </nav>

  <section id="place" class="section visible">
    <div class="game-tabs">
      <button data-game="odoom" class="active">ODOOM</button>
      <button data-game="oquake">OQUAKE</button>
    </div>
    <div id="asset-panels">
      <div id="panel-odoom" class="game-panel">
        <div class="category"><h3>Keycards / Keys</h3><div class="asset-grid" id="odoom-keys"></div></div>
        <div class="category"><h3>Weapons</h3><div class="asset-grid" id="odoom-weapons"></div></div>
        <div class="category"><h3>Ammo</h3><div class="asset-grid" id="odoom-ammo"></div></div>
        <div class="category"><h3>Health / Armor</h3><div class="asset-grid" id="odoom-health"></div></div>
        <div class="category"><h3>Monsters</h3><div class="asset-grid" id="odoom-monsters"></div></div>
      </div>
      <div id="panel-oquake" class="game-panel" style="display:none">
        <div class="category"><h3>Keys</h3><div class="asset-grid" id="oquake-keys"></div></div>
        <div class="category"><h3>Weapons</h3><div class="asset-grid" id="oquake-weapons"></div></div>
        <div class="category"><h3>Ammo</h3><div class="asset-grid" id="oquake-ammo"></div></div>
        <div class="category"><h3>Health / Armor</h3><div class="asset-grid" id="oquake-health"></div></div>
        <div class="category"><h3>Monsters</h3><div class="asset-grid" id="oquake-monsters"></div></div>
      </div>
    </div>
    <div class="help">
      In Ultimate Doom Builder: click in the 2D map at the desired position, then run <strong>Scripts → OASIS → OASIS STAR - Place selected asset at cursor</strong> (or use the STAR toolbar button / STAR menu). Choose the asset in the dialog to place it.
    </div>
  </section>

  <section id="convert" class="section">
    <p style="margin:0 0 10px 0;">Convert between OQUAKE and ODOOM map formats.</p>
    <div style="display:flex;flex-direction:column;gap:8px;">
      <button id="btn-oq2odoom" style="padding:10px;background:var(--surface);border:1px solid var(--muted);color:var(--text);cursor:pointer;border-radius:4px;">Convert OQUAKE .map → ODOOM (thing list / WAD)</button>
      <button id="btn-odoom2oq" style="padding:10px;background:var(--surface);border:1px solid var(--muted);color:var(--text);cursor:pointer;border-radius:4px;">Convert ODOOM map → OQUAKE .map</button>
    </div>
    <p id="convert-msg" style="font-size:0.85rem;color:var(--muted);margin-top:10px;"></p>
    <div class="help" style="margin-top:10px;">
      Run the converter from the OASIS Omniverse folder: <code>node ODOOM/tools/convert_oasis_maps.js &lt;quake.map|doom.wad&gt;</code> or use the STAR menu in UDB (if integrated).
    </div>
  </section>

  <section id="about" class="section">
    <p>OASIS STAR API lets you place assets from <strong>ODOOM</strong> and <strong>OQUAKE</strong> (and other OGames) into your maps. Place keycards, monsters, weapons, health, and ammo from either game into ODOOM maps (OQUAKE assets use Doom-equivalent thing types).</p>
    <p>Next step: modify ODOOM and OQUAKE runtimes so cross-game assets work in-game (e.g. using an OQUAKE weapon in ODOOM).</p>
    <p style="color:var(--muted);font-size:0.9rem;">Asset list: <code>Config/oasis_star_assets.json</code></p>
  </section>

  <script>
    (function() {
      var ASSETS = {"odoom":{"keycards":[{"id":"blue_keycard","name":"Blue Keycard","doomThingType":5},{"id":"red_keycard","name":"Red Keycard","doomThingType":13},{"id":"yellow_keycard","name":"Yellow Keycard","doomThingType":6},{"id":"skull_red","name":"Red Skull Key","doomThingType":38},{"id":"skull_blue","name":"Blue Skull Key","doomThingType":39},{"id":"skull_yellow","name":"Yellow Skull Key","doomThingType":40}],"weapons":[{"id":"shotgun","name":"Shotgun","doomThingType":2001},{"id":"chaingun","name":"Chaingun","doomThingType":2002},{"id":"rocket_launcher","name":"Rocket Launcher","doomThingType":2003},{"id":"plasma_rifle","name":"Plasma Rifle","doomThingType":2004},{"id":"chainsaw","name":"Chainsaw","doomThingType":2005},{"id":"bfg9000","name":"BFG 9000","doomThingType":2006}],"ammo":[{"id":"clip","name":"Clip","doomThingType":2007},{"id":"shells","name":"Shells","doomThingType":2008},{"id":"rocket","name":"Rocket","doomThingType":2010},{"id":"cell","name":"Cell","doomThingType":2047},{"id":"cell_pack","name":"Cell Pack","doomThingType":2048},{"id":"ammo_box","name":"Ammo Box","doomThingType":2049}],"health":[{"id":"medikit","name":"Medikit","doomThingType":2011},{"id":"stimpack","name":"Stimpack","doomThingType":2012},{"id":"soul_sphere","name":"Soul Sphere","doomThingType":2013},{"id":"health_potion","name":"Health Potion","doomThingType":2014},{"id":"armor_bonus","name":"Armor Bonus","doomThingType":2015},{"id":"armor_helmet","name":"Armor Helmet","doomThingType":2016}],"monsters":[{"id":"zombieman","name":"Zombieman","doomThingType":3004},{"id":"sergeant","name":"Sergeant","doomThingType":9},{"id":"imp","name":"Imp","doomThingType":3001},{"id":"demon","name":"Demon","doomThingType":3002},{"id":"spectre","name":"Spectre","doomThingType":58},{"id":"cacodemon","name":"Cacodemon","doomThingType":3005},{"id":"baron","name":"Baron of Hell","doomThingType":3003},{"id":"hell_knight","name":"Hell Knight","doomThingType":69},{"id":"lost_soul","name":"Lost Soul","doomThingType":3006},{"id":"revenant","name":"Revenant","doomThingType":65},{"id":"mancubus","name":"Mancubus","doomThingType":66},{"id":"arch_vile","name":"Arch-Vile","doomThingType":64},{"id":"pain_elemental","name":"Pain Elemental","doomThingType":68},{"id":"arachnotron","name":"Arachnotron","doomThingType":67},{"id":"spider_mastermind","name":"Spider Mastermind","doomThingType":7},{"id":"cyberdemon","name":"Cyberdemon","doomThingType":16}]},"oquake":{"keycards":[{"id":"silver_key","name":"Silver Key","quakeClassname":"key_silver","doomEquivalent":"red_keycard"},{"id":"gold_key","name":"Gold Key","quakeClassname":"key_gold","doomEquivalent":"blue_keycard"}],"weapons":[{"id":"shotgun","name":"Shotgun","quakeClassname":"weapon_shotgun"},{"id":"supershotgun","name":"Super Shotgun","quakeClassname":"weapon_supershotgun"},{"id":"nailgun","name":"Nailgun","quakeClassname":"weapon_nailgun"},{"id":"supernailgun","name":"Super Nailgun","quakeClassname":"weapon_supernailgun"},{"id":"grenadelauncher","name":"Grenade Launcher","quakeClassname":"weapon_grenadelauncher"},{"id":"rocketlauncher","name":"Rocket Launcher","quakeClassname":"weapon_rocketlauncher"},{"id":"lightning","name":"Thunderbolt","quakeClassname":"weapon_lightning"}],"ammo":[{"id":"shells","name":"Shells","quakeClassname":"item_shells"},{"id":"spikes","name":"Nails","quakeClassname":"item_spikes"},{"id":"rockets","name":"Rockets","quakeClassname":"item_rockets"},{"id":"cells","name":"Cells","quakeClassname":"item_cells"}],"health":[{"id":"health","name":"Health","quakeClassname":"item_health"},{"id":"health_small","name":"Small Health","quakeClassname":"item_health_small"},{"id":"armor1","name":"Green Armor","quakeClassname":"item_armor1"},{"id":"armor2","name":"Yellow Armor","quakeClassname":"item_armor2"},{"id":"armorInv","name":"Mega Armor","quakeClassname":"item_armorInv"}],"monsters":[{"id":"grunt","name":"Grunt","quakeClassname":"monster_grunt"},{"id":"ogre","name":"Ogre","quakeClassname":"monster_ogre"},{"id":"demon","name":"Demon","quakeClassname":"monster_demon"},{"id":"dog","name":"Rottweiler","quakeClassname":"monster_dog"},{"id":"shambler","name":"Shambler","quakeClassname":"monster_shambler"},{"id":"zombie","name":"Zombie","quakeClassname":"monster_zombie"},{"id":"hell_knight","name":"Hell Knight","quakeClassname":"monster_hell_knight"},{"id":"enforcer","name":"Enforcer","quakeClassname":"monster_enforcer"},{"id":"fish","name":"Fish","quakeClassname":"monster_fish"},{"id":"spawn","name":"Spawn","quakeClassname":"monster_spawn"}]}};

      var catIds = { keycards: 'keys', weapons: 'weapons', ammo: 'ammo', health: 'health', monsters: 'monsters' };
      function renderGame(game) {
        var g = ASSETS[game];
        if (!g) return;
        ['keycards','weapons','ammo','health','monsters'].forEach(function(cat) {
          var el = document.getElementById(game + '-' + catIds[cat]);
          if (!el) return;
          el.innerHTML = '';
          (g[cat] || []).forEach(function(a) {
            var btn = document.createElement('button');
            btn.className = 'asset-btn';
            btn.textContent = a.name;
            btn.dataset.game = game;
            btn.dataset.cat = cat;
            btn.dataset.id = a.id;
            btn.dataset.name = a.name;
            el.appendChild(btn);
          });
        });
      }
      function bindNav() {
        document.querySelectorAll('nav button[data-section]').forEach(function(b) {
          b.addEventListener('click', function() {
            document.querySelectorAll('nav button[data-section]').forEach(function(x) { x.classList.remove('active'); });
            document.querySelectorAll('.section').forEach(function(s) { s.classList.remove('visible'); });
            b.classList.add('active');
            document.getElementById(b.dataset.section).classList.add('visible');
          });
        });
        document.querySelectorAll('.game-tabs button').forEach(function(b) {
          b.addEventListener('click', function() {
            document.querySelectorAll('.game-tabs button').forEach(function(x) { x.classList.remove('active'); });
            document.querySelectorAll('.game-panel').forEach(function(p) { p.style.display = 'none'; });
            b.classList.add('active');
            var panel = document.getElementById('panel-' + b.dataset.game);
            if (panel) panel.style.display = 'block';
          });
        });
        document.getElementById('asset-panels').addEventListener('click', function(e) {
          var btn = e.target.closest('.asset-btn');
          if (!btn) return;
          document.querySelectorAll('.asset-btn').forEach(function(x) { x.classList.remove('selected'); });
          btn.classList.add('selected');
        });
      }
      document.getElementById('btn-oq2odoom').addEventListener('click', function() {
        document.getElementById('convert-msg').textContent = 'Use: node ODOOM/tools/convert_oasis_maps.js quake2doom <input.map>';
      });
      document.getElementById('btn-odoom2oq').addEventListener('click', function() {
        document.getElementById('convert-msg').textContent = 'Use: node ODOOM/tools/convert_oasis_maps.js doom2quake <map01.wad>';
      });
      renderGame('odoom');
      renderGame('oquake');
      bindNav();
    })();
  </script>
</body>
</html>
